!function(a){"use strict";var b={editable:!1},c={init:function(c,d){function w(){m.css({borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderTop:"6px solid #999",borderBottom:"none"}),i.css("border",o),s=!1,E()}function x(){m.css({borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderTop:"none",borderBottom:"6px solid #999"}),i.css({border:p,borderBottom:o}),s=!0,D()}function y(b){a(b).css({backgroundColor:"#eee"}).siblings().css({backgroundColor:"#fff"})}function z(b,c){var d=void 0==c||null==c?"<li>":'<li data-value="'+c+'">',e=a(d+b+"</li>").appendTo(n);e.css({display:"list-item",padding:"3px",paddingLeft:g.css("paddingLeft"),paddingRight:g.css("paddingRight"),textAlign:"left",cursor:"pointer"}).hover(function(){y(e)}).on("click",function(){l.trigger("click"),j.val(e.text()),k.val(e.attr("data-value"))}).css({height:function(){var a=function(a){return parseInt(a.substring(0,a.length-2))||0},b=a(e.css("paddingTop")||"0px")+a(e.css("paddingBottom")||"0px"),c=Math.max(a(e.css("fontSize")||"0px"),Math.max(a(e.css("lineHeight")||"0px"),g.height()));return b+c}()})}function A(b){var c=a(b);z(c.text(),c.val())}function B(){n.children().remove(),g.children().each(function(a,b){A(b)})}function C(b){n.children().remove(),g.children().each(function(c,d){(a(d).val()||"").indexOf(b)>=0&&A(d)})}function D(){if(n.children().length>0){var c,d,b=k.val();n.children().each(function(e,f){d=a(f),c=d.attr("data-value"),c===b?d.css({backgroundColor:"#eee"}):d.css({backgroundColor:"#fff"})}),n.fadeIn(v)}else n.fadeOut(v),i.css({borderBottom:p})}function E(){n.fadeOut(v)}var e=a.extend(!0,{},b,d),f=e.editable===!0?!0:!1,g=a(c),h=a("<div/>").insertBefore(g),i=a("<div/>").appendTo(h),j=a(f?"<input/>":"<span></span>").appendTo(i),k=a('<input type="hidden"/>').insertAfter(j),l=a("<div/>").appendTo(i),m=a("<div/>").appendTo(l),n=a("<ul/>").insertAfter(i),o=g.css("border")||"1px solid #ccc",p="1px solid #999",q="1px solid #aaa",r=18,s=!1,t=!1,u=!1,v=10;f||(j.css("cursor","pointer").val=function(a){return j.html(a)},a(document).on("click",function(){t||u||!s||w()})),h.css({display:"inline-block",margin:0,padding:0,border:"none"}),i.attr({"class":g.attr("class")}).css({display:"inline-block",border:o,width:g.outerWidth(),height:g.outerHeight(),padding:0,margin:0,"float":"left"}).hover(function(){u=!0},function(){u=!1}),l.css({display:"inline-block",borderLeft:o,width:r,height:i.height(),boxSizing:"border-box",cursor:"pointer","float":"right"}).on("click",function(a){a.preventDefault(),j.trigger("click")}),m.css({width:0,height:0,position:"relative",left:(r-6)/2,top:(i.height()-6)/2}),k.attr({id:g.attr("id")+"_value",name:g.attr("name")}),j.attr({id:g.attr("id"),alt:g.attr("alt"),title:g.attr("title"),disabled:g.attr("disabled"),tabindex:g.attr("tabindex")}).css({border:"none",display:"inline-block",fontFamily:g.css("fontFamily"),fontSize:g.css("fontSize"),background:g.css("background"),width:i.innerWidth()-l.outerWidth(),height:i.height(),lineHeight:g.css("lineHeight"),margin:0,paddingLeft:g.css("paddingLeft"),paddingRight:g.css("paddingRight"),paddingTop:g.css("paddingTop"),paddingBottom:g.css("paddingBottom"),boxSizing:"border-box","float":"left"}).on("click",function(){B(),s?w():x()}).on("focus",function(){j.css({outline:"none"})}).on("blur",function(){t||w()}).keyup(function(){C(j.val()),k.val(j.val()),D()}),k.val(g.val()),j.val(g.find("> option:selected").text()),n.css({display:"none",listStyleType:"none",width:g.outerWidth(),padding:0,margin:0,border:q,fontFamily:g.css("fontFamily"),fontSize:g.css("fontSize"),background:"#fff","float":"left",marginTop:i.outerHeight()-1,position:"absolute",zIndex:1e6}).hover(function(){t=!0},function(){t=!1}),w(),g.removeAttr("id").removeAttr("name").hide(),B()}};a.fn.selectx=function(b){return a(this).each(function(){var f=a(this);f.data("_selectxed_")||(c.init(this,b),f.data("_selectxed_",!0))})},a.fn.selectx.settings=b}(jQuery);
