!function(a){"use strict";var b={init:function(b){function r(){i.css({borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderTop:"6px solid #999",borderBottom:"none"}),e.css("border",k),o=!1,z()}function s(){i.css({borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderTop:"none",borderBottom:"6px solid #999"}),e.css({border:l,borderBottom:k}),o=!0,y()}function u(b,d){var e=void 0==d||null==d?"<li>":'<li data-value="'+d+'">',i=a(e+b+"</li>").appendTo(j);i.css({padding:"3px",paddingLeft:c.css("paddingLeft"),paddingRight:c.css("paddingRight"),textAlign:"left",cursor:"pointer"}).hover(function(){i.css({backgroundColor:"#eee"})},function(){i.css({backgroundColor:"#fff"})}).on("click",function(){h.trigger("click"),f.val(i.text()),g.val(i.attr("data-value"))})}function v(b){var c=a(b);u(c.text(),c.val())}function w(){c.children().each(function(a,b){v(b)})}function x(b){j.children().remove(),c.children().each(function(c,d){(a(d).val()||"").indexOf(b)>=0&&v(d)})}function y(){j.children().length>0?j.fadeIn(q):(j.fadeOut(q),e.css({borderBottom:l}))}function z(){j.fadeOut(q)}var t,c=a(b),d=a("<div/>").insertBefore(c),e=a("<div/>").appendTo(d),f=a("<input/>").appendTo(e),g=a('<input type="hidden"/>').insertAfter(f),h=a("<div/>").appendTo(e),i=a("<div/>").appendTo(h),j=a("<ul/>").insertAfter(e),k=c.css("border")||"1px solid #ccc",l="1px solid #999",m="1px solid #aaa",n=18,o=!1,p=!1,q=10;d.css({display:"inline-block",margin:0,padding:0,border:"none"}),e.attr({"class":c.attr("class")}).css({display:"inline-block",border:k,width:c.outerWidth(),height:c.outerHeight(),padding:0,margin:0}),h.css({display:"inline-block",borderLeft:k,width:n,height:e.height(),boxSizing:"border-box",cursor:"pointer","float":"right"}).on("click",function(a){a.preventDefault(),f.trigger("click")}),i.css({width:0,height:0,position:"relative",left:(n-6)/2,top:(e.height()-6)/2}),g.attr({id:c.attr("id")+"_value",name:c.attr("name")}),f.attr({id:c.attr("id"),alt:c.attr("alt"),title:c.attr("title"),disabled:c.attr("disabled"),tabindex:c.attr("tabindex")}).css({border:"none",display:"inline-block",fontFamily:c.css("fontFamily"),fontSize:c.css("fontSize"),background:c.css("background"),width:e.innerWidth()-h.outerWidth(),height:e.height(),lineHeight:c.css("lineHeight"),margin:0,paddingLeft:c.css("paddingLeft"),paddingRight:c.css("paddingRight"),paddingTop:c.css("paddingTop"),paddingBottom:c.css("paddingBottom"),boxSizing:"border-box","float":"left"}).on("click",function(){o?r():s()}).on("focus",function(){f.css({outline:"none"})}).on("blur",function(){p||r()}).keyup(function(){x(f.val()),g.val(f.val()),y()}),g.val(c.val()),f.val(c.find("> option:selected").text()),j.css({display:"none",listStyleType:"none",width:c.outerWidth(),padding:0,margin:0,border:m,fontFamily:c.css("fontFamily"),fontSize:c.css("fontSize"),background:"#fff",position:"absolute",zIndex:1e6}).hover(function(){p=!0},function(){p=!1}),t=e.position(),t.top=t.top+e.outerHeight()-1,j.offset(t),r(),c.removeAttr("id").removeAttr("name").hide(),w()}};a.fn.selectx=function(){return a(this).each(function(){b.init(this)})}}(jQuery);
